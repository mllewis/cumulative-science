---
title: "Assignment 0: Intro to R and RStudio"
subtitle: "Modern Research Methods"
output:
  html_document:
    css: lab.css
    highlight: kate
    theme: cosmo
    toc: true
    toc_float: true
---

```{r global_options, include=FALSE}
# DO NOT EDIT THIS
knitr::opts_chunk$set(eval = FALSE)
library(tidyverse)
```

<br>
<br>
<div id="boxedtext">

 <font size="4"> **Objectives** </font> 
 
By the end of this assignment, you should:

- understand how to interact with Rstudio
- know the parts of a R Markdown file and how to knit 
- know how to submit an assignment.
- understand how to load a package. 
- understand how to read a help file. 
- understand some basic R commands
</div>

There are 10 simple exercises in this lab. The goal is to turn in this assignment at the end of lab today.

## Getting started with R
The goal of this lab is to introduce you to R and RStudio, which you'll be using
throughout the course both to learn the statistical concepts discussed in the 
course and to analyze real data and come to informed conclusions. To clarify
which is which: R is the name of the programming language itself and RStudio 
is a convenient interface. RStudio *Cloud* is just a verion of Rstudio that exists online.

As the assignments progress, you are encouraged to explore beyond what the assignments dictate;
a willingness to experiment will make you a much better programmer. Before we 
get to that stage, however, you need to build some basic fluency in R. Today we
begin with the fundamental building blocks of R and RStudio: the interface, 
reading in data, and basic commands.

In RStudio, the panel on the lower left is where the action happens. It's called the *console*. 
Everytime you launch RStudio, it will have the same text at the top of the 
console telling you the version of R that you're running. Below that information
is the *prompt*. As its name suggests, this prompt is really a request: a 
request for a command. Initially, interacting with R is all about typing commands
and interpreting the output. These commands and their syntax have evolved over
decades (literally) and now provide what many users feel is a fairly natural way
to access data and organize, describe, and invoke statistical computations.

### Creating a reproducible report
We will be using a markdown language, R Markdown, to type up the  assignment This allows you to complete your report entirely in RStudio as well as ensuring reproducibility of your analysis and results. 

An R Markdown document has three main parts: 

__Header__: Contains some information about the current report ("metadata"). It's everything between the sets of three dash marks at the top of this file (lines 1-13).

__Plain Text __: Narrative text describing your analysis.

__R chunks__: These are sections where you can run R code. An R chunk starts with three tick marks followed by {r} and ends with three tick marks. In these chunks, you can run any sort of R code. You can run a chunk by:

- clicking on the green arrow at the top right of the code chunk in the R Markdown (Rmd) 
file, or
- putting your curser in the chunk, and hitting `Ctrl-Shift-Enter`, or
- typing the code in the console.

(1) Try running this R chunk below 
    
```{r}
365 * 112
```


R markdown files usually have a header at the top followed by a mix of plain text and R chunks. What's really useful about R markdown files is it allows you to turn your `.Rmd` file into a pretty report. Turning your `.Rmd` file into a pretty report is called "knitting." 

(1) To knit your file click the *Knit* button at the top of Rstudio (with the yarn symbol).  Try knitting this file now.

You should see a new window pop up that shows the pretty knitted version. The pretty knitted version is actually a separate file that ends in `.html`. If you look in the bottom right Files section of RStudio you should see a new file called `MRM_assignment_0.html`. 

(1) Before you keep going, type your name in the "author:" field in the header section at the top of this file (`.Rmd`). Then click on *Knit* and you'll see your document in a 
new pop-up window. Try re-knitting to see the change now.

To complete the assignment, spaces are provided for you to enter R code chunks. Going forward you should refrain from typing your code directly in the console, and
instead type any code (final correct answer, or anything you're just trying out) in
the R Markdown file and run the chunk. 

For each assignment, you will turn in two files: the edited `.Rmd` file and the corresponding `.html` file (for this assignment it would be `MRM_assignment_0.Rmd` and `MRM_assignment_0.html`). To turn the assignment in, you select the check box next to the file name in the Files panel in the lower right corner of RStudio. Then go to `More` -> `Export`-> `Download` to download the file. You'll have to do this for BOTH the `.Rmd` file and the `.html` file. 


[**Why use R Markdown for Lab Reports?**](https://youtu.be/lNWVQ2oxNho)
<iframe width="560" height="315" src="https://www.youtube.com/embed/lNWVQ2oxNho" frameborder="0" allowfullscreen></iframe>

There are lots of more advanced features of rmarkdown. If you'd like to learn more about them, this  [cheatsheat](https://rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf) provides a useful summary. 

### R Packages
R is an open-source programming language, meaning that users can contribute
packages that make our lives easier, and we can use them for free. For this assignment,
and  others in the future, we will use the following R package:

- *tidyverse*: an ecosystem of packages designed for working with and presenting data 

Note that you can check to see which packages (and which versions) are installed by
inspecting the *Packages* tab in the lower right panel of RStudio. 

You need to load these packages in your working environment. We do this with
the `library` function. Run the following lines in your console.

```{r load-packages, message = FALSE, eval=TRUE}
library(tidyverse)
```

You can find out more about the packages that make up the `tidyverse` at http://tidyverse.org/.

## Exploring data in R

### Dr. Arbuthnot's Baptism Records

To get you started working with data in R, run the following command to load the data.

```{r load-abrbuthnot-data, eval=TRUE, message = FALSE}
arbuthnot <- read_csv("data/arbuthnot.csv")
```

You can do this by

- clicking on the green arrow at the top right of the code chunk in the R Markdown (Rmd) 
file, or
- putting your curser in the chunk, and hitting `Ctrl-Shift-Enter`, or
- typing the code in the console.

This command instructs R to load some data: 
the Arbuthnot baptism counts for boys and girls. You should see that the 
workspace area in the upper righthand corner of the RStudio window now lists a 
data set called `arbuthnot` that has 82 observations on 3 variables. As you 
interact with R, you will create a series of objects. Sometimes you load them as
we have done here, and sometimes you create them yourself as the byproduct of a 
computation or some analysis you have performed.

The Arbuthnot data set refers to Dr. John Arbuthnot, an 18<sup>th</sup> century 
physician, writer, and mathematician. He was interested in the ratio of newborn
boys to newborn girls, so he gathered the baptism records for children born in
London for every year from 1629 to 1710. We can view the data by 
typing its name into the console.

```{r view-data}
arbuthnot
```

However printing the whole dataset in the console is not that useful. 
One advantage of RStudio is that it comes with a built-in data viewer. Click on
the name `arbuthnot` in the *Environment* pane (upper right window) that lists 
the objects in your workspace. This will bring up an alternative display of the 
data set in the *Data Viewer* (upper left window). You can close the data viewer
by clicking on the `x` in the upper lefthand corner.

What you should see are four columns of numbers, each row representing a 
different year: the first entry in each row is simply the row number (an index 
we can use to access the data from individual years if we want), the second is 
the year, and the third and fourth are the numbers of boys and girls baptized 
that year, respectively. Use the scrollbar on the right side of the console 
window to examine the complete data set.

Note that the row numbers in the first column are not part of Arbuthnot's data. 
R adds them as part of its printout to help you make visual comparisons. You can
think of them as the index that you see on the left side of a spreadsheet. In 
fact, the comparison to a spreadsheet will generally be helpful. R has stored 
Arbuthnot's data in a kind of spreadsheet or table called a *data frame*.

You can see the dimensions of this data frame as well as the names of the variables 
and the first few observations by typing:

```{r glimpse-data}
glimpse(arbuthnot)
```

This command should output the following

```{r glimpse-data-result, echo=FALSE, eval=TRUE}
glimpse(arbuthnot)
```

We can see that there are 82 observations and 3 variables in this dataset. The variable names are `year`, `boys`, and `girls`. At this point, you might notice 
that many of the commands in R look a  lot like functions from math class; that 
is, invoking R commands means supplying a function with some number of arguments. 
The `glimpse` command, for example, took a single argument, the name of a data frame. 

### Working with the data
Let's start to examine the data a little more closely. We can access the data in
a single column of a data frame separately using a command like

```{r view-boys}
arbuthnot$boys
```

This command will only show the number of boys baptized each year. The dollar
sign basically says "go to the data frame that comes before me, and find the 
variable that comes after me".

1. What command would you use to extract just the counts of girls baptized? Try
    it! 
    
Notice that the way R has printed these data is different. When we looked at the
complete data frame, we saw 82 rows, one on each line of the display. These data
are no longer structured in a table with other variables, so they are displayed 
one right after another. Objects that print out in this way are called *vectors*; 
they represent a set of numbers. R has added numbers in [brackets] along the left
side of the printout to indicate locations within the vector. For example, 5218 
follows [1], indicating that 5218 is the first entry in the vector. And if [43] 
starts a line, then that would mean the first number on that line would represent
the 43rd entry in the vector. To see the nth value of `arbuthnot$boys`, type `arbuthnot$boys[n]`, replacing n with the value you are interested in.

(1) What is the value of the 43rd entry of `arbuthnot$boys`. 

Now, suppose we want to plot the total number of baptisms. To compute this, we 
could use the fact that R is really just a big calculator. We can type in 
mathematical expressions like

```{r calc-total-bapt-numbers}
5218 + 4683
```

to see the total number of baptisms in 1629. We could repeat this once for each 
year, but there is a faster way. If we add the vector for baptisms for boys to 
that of girls, R will compute sums for all years simultaneously.

```{r calc-total-bapt-vars}
arbuthnot$boys + arbuthnot$girls
```

What you will see are 82 numbers (in that packed display, because we aren’t 
looking at a data frame here), each one representing the sum we’re after. Take a
look at a few of them and verify that they are right.

(1) How many TOTAL births were there in the year 1630?

What if we wanted to know the average number of boys births in a given year? To answer this question we need a *function*. Functions  also called *commands*: Functions perform tasks in R. Functions take arguments as input and then return an output. 

For example, to calculate the average number of boy births in a given year, we can use  the function `mean()`. This function calculates the mean, or average, for a list of numbers.

To learn about the arguments this function uses, we can look at the Help file by typing `?mean` in the console. We see that the first argument (`x`) that `mean` takes is a numeric vector. 

(1) What is the third argument to the `mean` function?


For any given function, some arguments are required and some are optional. Arguments that have have an equals sign already have default values, and so you don't need to supply them. Therefore, to use the mean function you are only required to supply the first argument (`x`). 

(1) Use the mean function to calculate the average number of boy births in a given year


We'll work with functions a lot throughout this course and you'll get lots of practice in understanding their behaviors. 

R has some powerful functions for making graphics. We'll spend lots of time in a few weeks on visualization. We can create a simple plot  of the number of girls baptized per year with the command

```{r plot-girls-vs-year, eval = T}
ggplot(arbuthnot, aes(x = year, y = girls)) +
  geom_point()
```

The `ggplot()` function (meaning "grammar of graphics plot") is a function from the `tidyverse` package  (actually it's part of package *in* the tidyverse package called, ggplot2) that lets you build plots by specifying them in a grammar of graphics. Here we made a scatterplot that should appear under the *Plots* tab of the lower right panel of RStudio. 

(1) Can you make a plot of the number of boys born as a function of year?

(1) Describe the trend in number of births of boys as a function of time.


## Nuts and bolts of programming 

### R Syntax

As the course progresses, we'll learn a lot more R syntax. This [cheatsheet](https://rstudio.com/wp-content/uploads/2016/10/r-cheat-sheet-3.pdf) provides a nice overview.

### Errors, warnings, and messages {#messages}

One thing that intimidates new R and RStudio users is how it reports *errors*, *warnings*, and *messages*. R reports errors, warnings, and messages in a glaring red font, which makes it seem like it is scolding you. However, seeing red text in the console is not always bad.

R will show red text in the console pane in three different situations:

* **Errors**: When the red text is a legitimate error, it will be prefaced with "Error in…" and will try to explain what went wrong. Generally when there's an error, the code will not run. For example, if you see `Error in ggplot(...) : could not find function "ggplot"`, it means that the `ggplot()` function is not accessible because the package that contains the function (`ggplot2`) was not loaded with `library(tidyverse)`. Thus you cannot use the `ggplot()` function without the `tidyverse` package being loaded first.
* **Warnings**: When the red text is a warning, it will be prefaced with "Warning:" and R will try to explain why there's a warning. Generally your code will still work, but with some caveats. For example, yif you create a scatterplot based on a dataset where two of the rows of data have missing entries that would be needed to create points in the scatterplot, you will see this warning: `Warning: Removed 2 rows containing missing values (geom_point)`. R will still produce the scatterplot with all the remaining non-missing values, but it is warning you that two of the points aren't there.
* **Messages**: When the red text doesn't start with either "Error" or "Warning", it's *just a friendly message*. You'll see these messages when you load *R packages* in the upcoming Subsection \@ref(package-loading) or when you read data saved in spreadsheet files with the `read_csv()` function as you'll see in Chapter \@ref(tidy). These are helpful diagnostic messages and they don't stop your code from working. Additionally, you'll see these messages when you install packages too using `install.packages()` as discussed in Subsection \@ref(package-installation).

Remember, when you see red text in the console, *don't panic*. It doesn't necessarily mean anything is wrong. Rather:

* If the text starts with "Error", figure out what's causing it. <span style="color:red">Think of errors as a red traffic light: something is wrong!</span>
* If the text starts with "Warning", figure out if it's something to worry about. For instance, if you get a warning about missing values in a scatterplot and you know there are missing values, you're fine. If that's surprising, look at your data and see what's missing. <span style="color:gold">Think of warnings as a yellow traffic light: everything is working fine, but watch out/pay attention.</span>
* Otherwise, the text is just a message. Read it, wave back at R, and thank it for talking to you. <span style="color:green">Think of messages as a green traffic light: everything is working fine and keep on going!</span>



### Tips on learning to code 

Learning to code/program is quite similar to learning a foreign language. It can be daunting and frustrating at first. Such frustrations are common and it is normal to feel discouraged as you learn. However, just as with learning a foreign language, if you put in the effort and are not afraid to make mistakes, anybody can learn and improve. 

Here are a few useful tips to keep in mind as you learn to program:

* **Remember that computers are not actually that smart**: You may think your computer or smartphone is "smart," but really people spent a lot of time and energy designing them to appear "smart." In reality, you have to tell a computer everything it needs to do. Furthermore, the instructions you give your computer can't have any mistakes in them, nor can they be ambiguous in any way.
* **Take the "copy, paste, and tweak" approach**: Especially when you learn your first programming language or you need to understand particularly complicated code, it is often much easier to take existing code that you know works and modify it to suit your ends. This is as opposed to trying to type out the code from scratch. We call this the *"copy, paste, and tweak"* approach. So early on, we suggest not trying to write code from memory, but rather take existing examples we have provided you, then copy, paste, and tweak them to suit your goals. After you start feeling more confident, you can slowly move away from this approach and write code from scratch. Think of the "copy, paste, and tweak" approach as training wheels for a child learning to ride a bike. After getting comfortable, they won't need them anymore. 
* **The best way to learn to code is by doing**: Rather than learning to code for its own sake, we find that learning to code goes much smoother when you have a goal in mind or when you are working on a particular project, like analyzing data that you are interested in and that is important to you. 
* **Practice is key**:  Just as the only method to improve your foreign language skills is through lots of practice and speaking, the only method to improving your coding skills is through lots of practice. Don't worry, however, we'll give you plenty of opportunities to do so!


* * *

<div id="license">
This lab is created and released under a 
[Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License](https://creativecommons.org/licenses/by-nc-sa/4.0/). This assignment is adapted from a lab created for OpenIntro by Andrew Bray and Mine &Ccedil;etinkaya-Rundel from a lab written by Mark Hansen of UCLA Statistics, and from the website  *Statistical Inference via Data Science: A ModernDive into R and the Tidyverse!* by Chester Ismay and Albert Y. Kim 
</div>



